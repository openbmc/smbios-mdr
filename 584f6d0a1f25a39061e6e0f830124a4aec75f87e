{
  "comments": [
    {
      "key": {
        "uuid": "2e05b541_61a4acc8",
        "filename": "src/cpuinfo_utils.cpp",
        "patchSetId": 11
      },
      "lineNbr": 126,
      "author": {
        "id": 1000559
      },
      "writtenOn": "2021-03-11T21:17:07Z",
      "side": 1,
      "message": "Should this be moved into try block also?",
      "range": {
        "startLine": 116,
        "startChar": 3,
        "endLine": 126,
        "endChar": 5
      },
      "revId": "584f6d0a1f25a39061e6e0f830124a4aec75f87e",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "9ade0ef5_290bf638",
        "filename": "src/cpuinfo_utils.cpp",
        "patchSetId": 11
      },
      "lineNbr": 126,
      "author": {
        "id": 1000900
      },
      "writtenOn": "2021-03-12T00:41:46Z",
      "side": 1,
      "message": "Yes, good catch! I had assumed std::variant would be valueless by default, but rather the default constructor creates a variant holding the value-initialized value of the first alternative. The first alternative happens to be PropertyType here, so if the D-Bus call fails, this code will still call the handler().",
      "parentUuid": "2e05b541_61a4acc8",
      "range": {
        "startLine": 116,
        "startChar": 3,
        "endLine": 126,
        "endChar": 5
      },
      "revId": "584f6d0a1f25a39061e6e0f830124a4aec75f87e",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "55544bdb_f313e9d5",
        "filename": "src/cpuinfo_utils.cpp",
        "patchSetId": 11
      },
      "lineNbr": 126,
      "author": {
        "id": 1000900
      },
      "writtenOn": "2021-03-12T02:04:19Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "9ade0ef5_290bf638",
      "range": {
        "startLine": 116,
        "startChar": 3,
        "endLine": 126,
        "endChar": 5
      },
      "revId": "584f6d0a1f25a39061e6e0f830124a4aec75f87e",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "509027ba_e5766d91",
        "filename": "src/cpuinfo_utils.cpp",
        "patchSetId": 11
      },
      "lineNbr": 134,
      "author": {
        "id": 1000900
      },
      "writtenOn": "2021-03-04T02:28:05Z",
      "side": 1,
      "message": "This comment is wrong, now that I understand lambdas and forward a little better. If the caller passes handler by lvalue\u0026, then we will make a copy of it. If we make one copy, then we could make two and copy into both match callbacks, so the comment is misleading. But the code still works fine as it is, so I\u0027ll only fix this comment if I make another change.",
      "range": {
        "startLine": 132,
        "startChar": 72,
        "endLine": 134,
        "endChar": 66
      },
      "revId": "584f6d0a1f25a39061e6e0f830124a4aec75f87e",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "5a8b7462_50a3e5a1",
        "filename": "src/cpuinfo_utils.cpp",
        "patchSetId": 11
      },
      "lineNbr": 134,
      "author": {
        "id": 1000900
      },
      "writtenOn": "2021-03-12T02:04:19Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "509027ba_e5766d91",
      "range": {
        "startLine": 132,
        "startChar": 72,
        "endLine": 134,
        "endChar": 66
      },
      "revId": "584f6d0a1f25a39061e6e0f830124a4aec75f87e",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "73f671e9_d29e8d03",
        "filename": "src/cpuinfo_utils.cpp",
        "patchSetId": 11
      },
      "lineNbr": 230,
      "author": {
        "id": 1000559
      },
      "writtenOn": "2021-03-11T21:17:07Z",
      "side": 1,
      "message": "Possible race condition - new State received, biosDone has not updated, result in skipping biosInProgress state",
      "range": {
        "startLine": 220,
        "startChar": 0,
        "endLine": 230,
        "endChar": 1
      },
      "revId": "584f6d0a1f25a39061e6e0f830124a4aec75f87e",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "66bbe91f_257dbf40",
        "filename": "src/cpuinfo_utils.cpp",
        "patchSetId": 11
      },
      "lineNbr": 230,
      "author": {
        "id": 1000900
      },
      "writtenOn": "2021-03-12T00:41:46Z",
      "side": 1,
      "message": "biosDone is initialized to false (and powerState to Off), so the hostState should never get \"farther\" (later boot state) than it really is, unless there\u0027s something wrong with the D-Bus services. Can you write out the exact sequence of events you\u0027re thinking of?",
      "parentUuid": "73f671e9_d29e8d03",
      "range": {
        "startLine": 220,
        "startChar": 0,
        "endLine": 230,
        "endChar": 1
      },
      "revId": "584f6d0a1f25a39061e6e0f830124a4aec75f87e",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "10401603_6cc1a971",
        "filename": "src/cpuinfo_utils.cpp",
        "patchSetId": 11
      },
      "lineNbr": 230,
      "author": {
        "id": 1000559
      },
      "writtenOn": "2021-03-12T01:48:55Z",
      "side": 1,
      "message": "Here is what I think the normal sequence\n1. powerState \u003d off, biosDone \u003d false \u003d\u003e Host Off\n2. powerState !\u003d off, biosDone no change \u003d\u003e BiosInProgress\n3. powerState no change, biosDone \u003d true \u003d\u003e BiosComplete\n4. powerState \u003d off, biosDone  no change \u003d\u003e Host Off\n5. powerState no change, biosDone \u003d false \u003d\u003e Host Off\n6. powerState !\u003d off, biosDone no change \u003d\u003e BiosInProgress\n7. powerState no change, biosDone \u003d true \u003d\u003e BiosComplete\n\nQuestion is: will #5 always happen and can the order of 5 and 6 can be guaranteed?",
      "parentUuid": "66bbe91f_257dbf40",
      "range": {
        "startLine": 220,
        "startChar": 0,
        "endLine": 230,
        "endChar": 1
      },
      "revId": "584f6d0a1f25a39061e6e0f830124a4aec75f87e",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "55fecacf_4d79f4bf",
        "filename": "src/cpuinfo_utils.cpp",
        "patchSetId": 11
      },
      "lineNbr": 230,
      "author": {
        "id": 1000900
      },
      "writtenOn": "2021-03-12T02:04:19Z",
      "side": 1,
      "message": "OK, I see your point - will think about it. My guess is that the \"normal\" sequence is guaranteed.",
      "parentUuid": "10401603_6cc1a971",
      "range": {
        "startLine": 220,
        "startChar": 0,
        "endLine": 230,
        "endChar": 1
      },
      "revId": "584f6d0a1f25a39061e6e0f830124a4aec75f87e",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "d77fa1d1_aa4db1ef",
        "filename": "src/cpuinfo_utils.cpp",
        "patchSetId": 11
      },
      "lineNbr": 230,
      "author": {
        "id": 1000559
      },
      "writtenOn": "2021-03-12T02:17:28Z",
      "side": 1,
      "message": "Probably is - at least now. \nBut it also seems ok to set biosDone \u003d false, when powerState \u003d off is received.\nThat should prevent the race and no unwanted side affect I can think of at this moment.",
      "parentUuid": "55fecacf_4d79f4bf",
      "range": {
        "startLine": 220,
        "startChar": 0,
        "endLine": 230,
        "endChar": 1
      },
      "revId": "584f6d0a1f25a39061e6e0f830124a4aec75f87e",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4",
      "unresolved": true
    }
  ]
}